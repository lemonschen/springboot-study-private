webpackJsonp([1],{"9Ybo":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i=(n("9Ybo"),{name:"App",created:function(){this.getUserAgent()},methods:{getUserAgent:function(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);this.$store.commit("ua",e?"mobile":"pc")}}}),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},s=n("VU/8")(i,a,!1,null,null,null).exports,r=n("/ocq"),l=n("woOf"),c=n.n(l),h=n("rR77"),u=n.n(h),d={name:"cli-dialog",model:{prop:"visible",event:"close"},props:{visible:Boolean},data:function(){return{innerVisible:this.visible,inputValue:""}},watch:{visible:function(e){var t=this;this.innerVisible=e,e&&this.$nextTick(function(){t.$refs.inputer.focus()})}},methods:{close:function(){this.$emit("close",!1)},listenValue:function(e){"小说"===e&&(this.$notify({message:"hi 好久不见，你还好吗~",showClose:!1,duration:4e3}),this.$router.push({name:"Novel"}))}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"}],attrs:{visible:e.innerVisible,"append-to-body":"","destroy-on-close":"","show-close":!1,title:"THE UNIVERSE IN A NUTSHELL",center:"",top:"40vh"},on:{"update:visible":function(t){e.innerVisible=t},close:e.close}},[n("el-input",{ref:"inputer",attrs:{placeholder:"hi 别来无恙~"},on:{change:e.listenValue},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)},staticRenderFns:[]},g=n("VU/8")(d,p,!1,null,null,null).exports,v={components:{CliDialog:g},name:"HelloWorld",data:function(){return{backgroundImage:u.a,response:"",ipc:"黔ICP备19010140号",ipcManageWebsite:"http://beian.miit.gov.cn",keyDown:{ctrl:!1,c:!1,z:!1,y:!1,trigger:!1},cliDialogVisible:!1,ua:this.$store.getters.ua,theLastTouch:null,touchCount:0}},mounted:function(){var e=this;document.onkeydown=function(t){return e.handlerKeyDown(t)},document.onkeyup=function(t){return e.handlerKeyUp(t)},this.$store.commit("token","token")},computed:{keyCode:function(){var e=this.keyDown;return{ctrl:e.ctrl,c:e.c,z:e.z,y:e.y}}},watch:{keyCode:function(e){var t=e.ctrl,n=e.c,o=e.z,i=e.y;t&&n&&o&&i&&!this.keyDown.trigger&&(this.keyDown.trigger=!0,this.triggerHideFunction())},cliDialogVisible:function(e){}},methods:{requestService:function(){var e=this;this.$get.findNovels(0,100).then(function(t){e.response=t}).catch(function(t){e.response=t})},openIpcManageWebsite:function(){window.open(this.ipcManageWebsite)},clickPage:function(){},handlerKeyDown:function(e){var t=e||event||window.event||arguments.callee.caller.arguments[0];t.ctrlKey&&!this.keyDown.ctrl&&(this.keyDown.ctrl=!0),67===t.keyCode&&(this.keyDown.c=!0),89===t.keyCode&&(this.keyDown.y=!0),90===t.keyCode&&(this.keyDown.z=!0)},handlerKeyUp:function(e){e||event||window.event||arguments.callee.caller.arguments[0];c()(this.keyDown,{ctrl:!1,c:!1,z:!1,y:!1})},triggerHideFunction:function(){this.keyDown.trigger=!1,this.$notify.success("你好，孟林C"),this.cliDialogVisible=!0},touchendHandler:function(e){if(null===this.theLastTouch)e.time=new Date,this.theLastTouch=e,this.touchCount=1;else{var t=this.theLastTouch.time,n=new Date;e.time=n,n.getTime()-t.getTime()>500?(this.theLastTouch=e,this.touchCount=1):5===this.touchCount?(this.triggerHideFunction(),this.theLastTouch=null,this.touchCount=0):(this.theLastTouch=e,this.touchCount++)}}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-page",on:{click:e.clickPage}},[n("el-image",{staticClass:"home-image",attrs:{fit:"contain",src:e.backgroundImage},on:{touchend:e.touchendHandler}}),e._v(" "),n("cli-dialog",{model:{value:e.cliDialogVisible,callback:function(t){e.cliDialogVisible=t},expression:"cliDialogVisible"}})],1)},staticRenderFns:[]},m=n("VU/8")(v,f,!1,null,null,null).exports,I={name:"novel",data:function(){return{page:{pageIndex:0,pageSize:100,totalSize:0,pagerCount:5},novels:[]}},created:function(){this.$store.getters.token||this.$router.push({name:"HelloWorld"})},mounted:function(){this.loadNovels()},methods:{loadNovels:function(){var e=this,t=this.$loading({lock:!0,text:"hi 好久不见，你还好吗 ~",background:"rgba(255,255,255,0)"});this.$get.findNovels(this.page.pageIndex,this.page.pageSize).then(function(n){t.close(),e.novels=n.result,e.page.totalSize=n.totalSize}).catch(function(e){t.close()})},handleCurrentChange:function(e){this.page.pageIndex=e},intoChapters:function(e){this.$router.push({name:"Chapter",params:{novelId:e.novelId}})}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"novel-page"},[n("vue-scroll",{staticClass:"novel-scroll"},[n("div",{staticClass:"novel-content"},[n("div",{staticClass:"nove-list"},e._l(e.novels,function(t){return n("div",{key:t.noveId,on:{click:function(n){return e.intoChapters(t)}}},[n("el-tooltip",{attrs:{placement:"right"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","font-size":"14px"},attrs:{slot:"content"},slot:"content"},[n("div",[e._v(e._s(t.novelName))]),e._v(" "),n("div",[e._v(e._s(t.author))])]),e._v(" "),n("el-image",{staticClass:"novel-image",attrs:{fit:"fill",src:t.coverImage}})],1)],1)}),0)])]),e._v(" "),n("div",{staticClass:"novel-pagination"},[n("el-pagination",{attrs:{"pager-count":e.page.pagerCount,"page-size":e.page.pageSize,total:e.page.totalSize,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]},C=n("VU/8")(I,x,!1,null,null,null).exports,$={name:"novel",data:function(){return{page:{pageIndex:0,pageSize:100,totalSize:0,pagerCount:5},chapters:[],novelId:0}},created:function(){this.$store.getters.token?void 0===this.$route.params.novelId?this.$store.getters.novelId?this.novelId=this.$store.getters.novelId:this.$router.push({name:"Novel"}):(this.novelId=this.$route.params.novelId,this.$store.commit("novelId",this.$route.params.novelId)):this.$router.push({name:"HelloWorld"})},mounted:function(){this.loadChapters()},methods:{loadChapters:function(){var e=this;if(this.novelId){var t=this.$loading({lock:!0,text:"hi 好久不见，你还好吗 ~",background:"rgba(255,255,255,0)"});this.$get.findChapters(this.novelId,this.page.pageIndex,this.page.pageSize).then(function(n){t.close(),e.chapters=n.result,e.page.totalSize=n.totalSize}).catch(function(e){t.close()})}},handleCurrentChange:function(e){this.page.pageIndex=e-1,this.loadChapters()},readerChapter:function(e){this.$router.push({name:"Reader",params:{novelId:e.novelId,chapterIndex:e.chapterIndex}})}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"s-page"},[n("vue-scroll",{staticClass:"s-scroll"},[n("div",{staticClass:"s-content"},[n("div",{staticClass:"s-chapter-list"},e._l(e.chapters,function(t){return n("div",{key:t.noveId,staticClass:"s-chapter-item"},[n("el-link",{staticClass:"s-chapter-title",on:{click:function(n){return e.readerChapter(t)}}},[e._v(e._s(t.chapterName))])],1)}),0)])]),e._v(" "),n("div",{staticClass:"s-pagination"},[n("el-pagination",{attrs:{"page-size":e.page.pageSize,total:e.page.totalSize,"pager-count":e.page.pagerCount,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var k=n("VU/8")($,y,!1,function(e){n("oi48")},"data-v-7c288ca4",null).exports,b=n("mvHQ"),H=n.n(b),w={name:"novel",data:function(){return{page:{pageIndex:0,pageSize:100,totalSize:0,pagerCount:11},chapters:[],chaptersMaxContainer:20,novelId:0,chapterIndex:0,scrollTop:0,scrollHeight:0,pageHeight:0,loading:!1}},created:function(){this.$store.getters.token?void 0===this.$route.params.novelId&&void 0===this.$route.params.chapterIndex?this.$store.getters.novelId&&"number"==typeof this.$store.getters.chapterIndex?(this.novelId=this.$store.getters.novelId,this.chapterIndex=this.$store.getters.chapterIndex):this.$router.push({name:"Chapter"}):(this.novelId=this.$route.params.novelId,this.chapterIndex=this.$route.params.chapterIndex,this.$store.commit("novelId",this.$route.params.novelId),this.$store.commit("chapterIndex",this.$route.params.chapterIndex)):this.$router.push({name:"HelloWorld"})},mounted:function(){this.loadChapter()},methods:{loadChapter:function(){var e=this;if(this.novelId&&"number"==typeof this.chapterIndex){var t=this.$loading({lock:!0,text:"hi 好久不见，你还好吗 ~",background:"rgba(255,255,255,0)"});this.$get.findChapter(this.novelId,this.chapterIndex).then(function(n){n&&(t.close(),e.chapters.push(n),e.updateTheLastChapterSize(0,0))}).catch(function(e){t.close()})}},updateFirstChapterSize:function(e,t){var n=this;this.$nextTick(function(){var o=n.$refs.reader.clientHeight||n.$refs.reader.scrollHeight,i=n.chapters,a=0;a=e===n.chaptersMaxContainer?o-(n.scrollHeight-t):o-n.scrollHeight,n.scrollHeight=o,i[n.chapters.length-1].height=a,n.chapters=JSON.parse(H()(i)),n.pageHeight=n.$refs.page.clientHeight||n.$refs.page.scrollHeight,n.$refs.scrollBox.scrollTo(0,a+n.$refs.scrollBox.getPosition().scrollTop),n.loading=!1})},updateTheLastChapterSize:function(e,t){var n=this;this.$nextTick(function(){var o=n.$refs.reader.clientHeight||n.$refs.reader.scrollHeight,i=n.chapters,a=0;a=e===n.chaptersMaxContainer?o-(n.scrollHeight-t):o-n.scrollHeight,n.scrollHeight=o,i[n.chapters.length-1].height=a,n.chapters=JSON.parse(H()(i)),n.pageHeight=n.$refs.page.clientHeight||n.$refs.page.scrollHeight,n.loading=!1})},scrollHandler:function(e,t,n){this.scrollHeight<=this.pageHeight?this.loadNext():this.scrollHandler<3*this.pageHeight?e.process<.2&&!this.loading?this.loadPrevious():e.process>.8&&!this.loading&&this.loadNext():e.scrollTop<500&&!this.loading?this.loadPrevious():this.scrollHeight-this.pageHeight-e.scrollTop<500&&!this.loading&&this.loadNext()},loadPrevious:function(){var e=this;this.loading=!0,this.$get.findPreviousChapter(this.novelId,this.chapters[0].chapterIndex).then(function(t){if(t){e.chapterIndex=t.chapterIndex,e.$store.commit("chapterIndex",t.chapterIndex);var n=e.chapters.length;n&&e.chapters[e.chapters.length-1].height;n===e.chaptersMaxContainer&&e.chapters.pop(),e.chapters.unshift(t),e.updateFirstChapterSize(n,oldFirstHeight)}else e.loading=!1}).catch(function(t){e.loading=!1})},loadNext:function(){var e=this;this.loading=!0,this.$get.findNextChapter(this.novelId,this.chapters[this.chapters.length-1].chapterIndex).then(function(t){if(t){e.chapterIndex=t.chapterIndex,e.$store.commit("chapterIndex",t.chapterIndex);var n=e.chapters.length,o=n?e.chapters[0].height:0;n===e.chaptersMaxContainer&&e.chapters.splice(0,1),e.chapters.push(t),e.updateTheLastChapterSize(n,o)}else e.loading=!1}).catch(function(t){e.loading=!1})}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"page",staticClass:"s-page"},[n("vue-scroll",{ref:"scrollBox",staticClass:"s-scroll",attrs:{ops:{mode:"slide"}},on:{"handle-scroll":e.scrollHandler}},[n("div",{ref:"reader",staticClass:"s-content"},e._l(e.chapters,function(t){return n("div",{key:t.chapterIndex,staticClass:"s-text-item"},[n("div",{staticClass:"s-text-reader s-text-title"},[e._v(e._s(t&&t.chapterName))]),e._v(" "),n("pre",{staticClass:"s-text-reader"},[e._v(e._s(t&&t.content))])])}),0)])],1)},staticRenderFns:[]};var _=n("VU/8")(w,S,!1,function(e){n("bLUT")},"data-v-172c8dc6",null).exports;o.default.use(r.a);var z=new r.a({mode:"history",routes:[{path:"/",name:"HelloWorld",component:m},{path:"/novel",name:"Novel",component:C},{path:"/chapter",name:"Chapter",component:k},{path:"/reader",name:"Reader",component:_}]}),N=n("mtWM"),T=n.n(N),D=n("DWlv"),V=n.n(D),L=n("zL8q"),U=n.n(L),F=(n("tvR6"),{findNovels:function(e,t){return T.a.get("novel",{params:{page:e,size:t}})},findChapters:function(e,t,n){return T.a.get("novel/"+e,{params:{page:t,size:n}})},findChapter:function(e,t){return T.a.get("novel/"+e+"/"+t)},findPreviousChapter:function(e,t){return T.a.get("novel/"+e+"/"+t+"/previous")},findNextChapter:function(e,t){return T.a.get("novel/"+e+"/"+t+"/next")}}),P=n("//Fk"),R=n.n(P);T.a.defaults.timeout=6e5,T.a.defaults.baseURL="http://service.uninut.top",T.a.interceptors.response.use(function(e){if(e&&e.data&&e.data.code&&200===e.data.code&&e.data.data)return R.a.resolve(e.data.data)},function(e){return R.a.reject(e)}),o.default.directive("dialog-drag",{bind:function(e,t,n,o){var i=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog");i.style.cursor="move";var s=a.currentStyle||window.getComputedStyle(a,null);i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,n=e.clientY-i.offsetTop,o=void 0,r=void 0;s.left.includes("%")?(o=+document.body.clientWidth*(+s.left.replace(/\%/g,"")/100),r=+document.body.clientHeight*(+s.top.replace(/\%/g,"")/100)):(o=+s.left.replace(/\px/g,""),r=+s.top.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,s=e.clientY-n;a.style.left=i+o+"px",a.style.top=s+r+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}});var W=[g],M={install:function(e){W.map(function(t){e.component(t.name,t)})}},E=n("NYxO");o.default.use(E.a);var B=new E.a.Store({state:{ua:"",token:"",novelId:"",chapterIndex:""},mutations:{ua:function(e,t){e.ua=t},token:function(e,t){e.token=t,sessionStorage.setItem("study-token",t)},novelId:function(e,t){e.novelId=t,sessionStorage.setItem("study-novel-id",t)},chapterIndex:function(e,t){e.chapterIndex=t,sessionStorage.setItem("study-chapter-index",t)}},getters:{ua:function(e){return e.ua},token:function(e){if(!e.token){var t=sessionStorage.getItem("study-token");t&&(e.token=t)}return e.token},novelId:function(e){if(!e.novelId){var t=sessionStorage.getItem("study-novel-id");t&&(e.novelId=t)}return e.novelId},chapterIndex:function(e){if(!e.chapterIndex){var t=sessionStorage.getItem("study-chapter-index");t&&(e.chapterIndex=t)}return e.chapterIndex}}}),A=n("+JZf"),O=n.n(A);o.default.use(V.a,T.a),o.default.use(U.a),o.default.use(M),o.default.use(O.a),o.default.prototype.$get=F,o.default.prototype.$store=B,o.default.config.productionTip=!1,new o.default({el:"#app",router:z,components:{App:s},template:"<App/>"})},bLUT:function(e,t){},oi48:function(e,t){},rR77:function(e,t,n){e.exports=n.p+"static/img/uninut.bad4703.jpg"},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0907ebba07afad610e28.js.map